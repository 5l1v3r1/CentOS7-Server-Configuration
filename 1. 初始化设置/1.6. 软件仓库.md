## 1.6. 软件仓库

**配置国内源（可选）**

```
wget http://mirrors.163.com/.help/CentOS7-Base-163.repo
cp CentOS7-Base-163.repo /etc/yum.repos.d/
cd /etc/yum.repos.d
mv CentOS-Base.repo CentOS-Base.repo.bak
mv CentOS7-Base-163.repo CentOS-Base.repo
yum clean all
yum makecache
yum update
```

**安装优先级插件：**

`yum -y install yum-plugin-priorities`

将官方仓库优先级设置为1（最高）：

`sed -i -e "s/\]$/\]\npriority=1/g" /etc/yum.repos.d/CentOS-Base.repo`

**添加[EPEL](https://fedoraproject.org/wiki/EPEL)仓库：**

`yum -y install epel-release`

`sed -i -e "s/\]$/\]\npriority=5/g" /etc/yum.repos.d/epel.repo` # 设置优先级为5

以下为另一种设置方式：

`sed -i -e "s/enabled=1/enabled=0/g" /etc/yum.repos.d/epel.repo` # 将enabled值设置为0

`[enabled=0]`时使用epel库,需添加`--enablerepo=epel`

`yum --enablerepo=epel install [Package]`

**添加[SCLo](https://wiki.centos.org/SpecialInterestGroup/SCLo)仓库：**

`yum -y install centos-release-scl-rh centos-release-scl`

`sed -i -e "s/\]$/\]\npriority=10/g" /etc/yum.repos.d/CentOS-SCLo-scl.repo` # 设置优先级为10

`sed -i -e "s/\]$/\]\npriority=10/g" /etc/yum.repos.d/CentOS-SCLo-scl-rh.repo`

以下为另一种设置方式：

`sed -i -e "s/enabled=1/enabled=0/g" /etc/yum.repos.d/CentOS-SCLo-scl.repo`

`sed -i -e "s/enabled=1/enabled=0/g" /etc/yum.repos.d/CentOS-SCLo-scl-rh.repo`

`yum --enablerepo=centos-sclo-rh install [Package]`

`yum --enablerepo=centos-sclo-sclo install [Package]`

**添加[Remi](http://rpms.famillecollet.com/)仓库：**

`yum -y install http://rpms.famillecollet.com/enterprise/remi-release-7.rpm`

`sed -i -e "s/\]$/\]\npriority=10/g" /etc/yum.repos.d/remi-safe.repo` # 设置优先级为10

以下为另一种设置方式：

`sed -i -e "s/enabled=1/enabled=0/g" /etc/yum.repos.d/remi-safe.repo`

`yum --enablerepo=remi-safe install [Package]`

**安装FFMPEG：**

先安装epel，然后运行：

```
rpm --import http://li.nux.ro/download/nux/RPM-GPG-KEY-nux.ro
rpm -Uvh http://li.nux.ro/download/nux/dextop/el7/x86_64/nux-dextop-release-0-5.el7.nux.noarch.rpm
sed -i -e "s/\]$/\]\npriority=10/g" /etc/yum.repos.d/nux-dextop.repo
yum -y install ffmpeg ffmpeg-devel
```

批量安装开发环境组件（包括了`gcc`、`make`等软件）

`yum -y groupinstall "Development tools"`

一些工具：

`yum -y install net-tools wget unzip`

配置中其它一些参数`/etc/yum.conf`：

```
[main]
cachedir=/var/cache/yum/$basearch/$releasever  # yum下载的RPM包的缓存目录
keepcache=0  # 是否保存缓存，1保存，0不保存
debuglevel=2  # 调试级别(0-10)，默认为2
logfile=/var/log/yum.log  # yum日志文件路径
exactarch=1  # 在更新的时候，是否允许更新不同版本的RPM包，比如是否在i386上更新i686的RPM包
obsoletes=1  # update的参数，具体请参阅yum(8)，简单的说就是相当于upgrade，允许更新陈旧的RPM包
gpgcheck=1  # 是否检查GPG(GNU Private Guard)，一种密钥方式签名
plugins=1  # 是否允许使用插件，用yum-fastestmirror等插件需要开启。
installonly_limit=5  # 允许保留多少个内核包。
exclude=selinux*  # 屏蔽不想更新的RPM包，可用通配符，多个RPM包之间使用空格分离
metadata_expire=90m  # 设定保存时长
```

