## 10.2. 代理服务器

### 10.2.1. 安装Squid

安装[Squid](http://www.squid-cache.org/)以配置代理服务器。

`yum -y install squid`

一般的转发代理设置：

编辑`/etc/squid/squid.conf`文件：

```
acl CONNECT method CONNECT
# 添加（定义新的ACL）
acl lan src 10.0.0.0/24

http_access allow localhost
# 添加（允许上面定义的ACL）
http_access allow lan

# 添加以下内容到最后
request_header_access Referer deny all
request_header_access X-Forwarded-For deny all
request_header_access Via deny all
request_header_access Cache-Control deny all

# 不显示IP地址
forwarded_for off
```

```
systemctl start squid
systemctl enable squid
```

firewalld防火墙规则，允许代理服务：

```
firewall-cmd --add-service=squid --permanent
firewall-cmd --reload
```

### 10.2.2. 配置客户端

配置代理客户端以连接到代理服务器。

CentOS客户端如下设置：


























