## 12.3. SysStat

[SysStat](http://sebastien.godard.pagesperso-orange.fr/)包含监测系统性能及效率的一组工具，这些工具对于我们收集系统性能数据，比如CPU使用率、硬盘和网络吞吐数据等。

### 12.3.1. 安装SysStat

`yum -y install sysstat`

```
systemctl start sysstat
systemctl enable sysstat
```

日志记录由cron的设置执行，如下所示：

* 使用`/usr/lib64/sa/sa1`命令，每10分钟将日志存储在`/var/log/sa/sa**`
* 使用`/usr/lib64/sa/sa2`命令，将一天的统计信息在每天23:53生成到`/var/log/sa/sar**`

`cat /etc/cron.d/sysstat`

```
# Run system activity accounting tool every 10 minutes
*/10 * * * * root /usr/lib64/sa/sa1 1 1
# 0 * * * * root /usr/lib64/sa/sa1 600 6 &
# Generate a daily summary of process accounting at 23:53
53 23 * * * root /usr/lib64/sa/sa2 -A
```

如果要更改SysStat的某些设置，编辑配置文件`/etc/sysconfig/sysstat`，如下所示：

```
[root@dlp ~]# vi /etc/sysconfig/sysstat
# sysstat-10.1.5 configuration file.

# How long to keep log files (in days).
# If value is greater than 28, then log files are kept in
# multiple directories, one for each month.
HISTORY=28

# Compress (using gzip or bzip2) sa and sar files older than (in days):
COMPRESSAFTER=31

# Parameters for the system activity data collector (see sadc manual page)
# which are used for the generation of log files.
# *注
SADC_OPTIONS="-S DISK"

# *注：有效选项
INT     ->  系统中断
DISK    ->  块设备
SNMP    ->  SNMP统计
IPV6    ->  IPv6统计
POWER   ->  电源管理统计
ALL     ->  以上所有
XDISK   ->  DISK + 分区统计
XALL    ->  以上所有（ALL + XDISK）
```

### 12.3.2. 使用方法

输入`sar`命令并指定如下所示的选项，可以显示日志（更多细节参考`man sar`）：

|选项|描述|
|-|-|
|-u|CPU利用率统计|
|-r|内存利用率统计|
|-b|I/O和传输速率统计|
|-B|分页统计|
|-d|每个块设备的活动|
|-n [关键词]|网络统计|
|-q|队列长度和负载平均值|
|-A|全部显示|











